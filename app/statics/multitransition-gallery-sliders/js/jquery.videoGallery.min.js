(function(f){function x(a,e){function h(c){if(b._componentInited&&!b._playlistTransitionOn&&!b.volumebarDown){if(!b.seekBarDown){if(q){if(c=c.originalEvent.touches,!(c&&0<c.length))return!1}else c.preventDefault();b.seekBarDown=!0;b._doc.on(r,function(d){a:{if(q){if(d.originalEvent.touches&&d.originalEvent.touches.length)var g=d.originalEvent.touches;else if(d.originalEvent.changedTouches&&d.originalEvent.changedTouches.length)g=d.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=
g[0]}else g=d;d.preventDefault();k(g.pageX)}});b._doc.on(t,function(d){a:if(b.seekBarDown){b.seekBarDown=!1;b._doc.off(r).off(t);if(q){if(d.originalEvent.touches&&d.originalEvent.touches.length)var g=d.originalEvent.touches;else if(d.originalEvent.changedTouches&&d.originalEvent.changedTouches.length)g=d.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=d;d.preventDefault();k(g.pageX)}})}return!1}}function k(c){c-=b.progress_bg.offset().left;0>c?c=0:c>b.seekBarSize&&(c=
b.seekBarSize);b.progress_level.width(c);c=(Math.max(0,Math.min(1,c/b.seekBarSize))*b.videoUp2Js.duration).toFixed(1);try{b.videoUp2Js.currentTime=c}catch(d){}}function l(){b.videoInited&&(b.player_progress_tooltip.css("display","block"),b.player_progress.on("mousemove",p).on("mouseout",m),b._doc.on("mouseout",m))}function m(){b.videoInited&&(b.player_progress_tooltip.css("display","none"),b.player_progress.off("mousemove",p).off("mouseout",m),b._doc.off("mouseout",m))}function p(c){c=c.pageX-b.player_progress.offset().left;
0>c?c=0:c>b.seekBarSize&&(c=b.seekBarSize);var d=c+parseInt(b.player_progress.css("left"),10)-b.player_progress_tooltip.width()/2;b.player_progress_tooltip.css("left",d+"px");b.player_progress_tooltip_value.html(b.formatCurrentTime(Math.max(0,Math.min(1,c/b.seekBarSize))*b.videoUp2Js.duration)+b.formatDuration(b.videoUp2Js.duration));c=b.player_progress_tooltip.width()/2-b.player_progress_tooltip_value.width()/2;b.player_progress_tooltip_value.css("left",c+"px")}function v(c){if(b._componentInited&&
!b._playlistTransitionOn&&!b.seekBarDown){if(!b.volumebarDown){if(q){if(c=c.originalEvent.touches,!(c&&0<c.length))return!1}else c.preventDefault();b.volumebarDown=!0;b._doc.on(r,function(d){a:{if(q){if(d.originalEvent.touches&&d.originalEvent.touches.length)var g=d.originalEvent.touches;else if(d.originalEvent.changedTouches&&d.originalEvent.changedTouches.length)g=d.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=d;d.preventDefault();u(g.pageX)}});b._doc.on(t,function(d){a:if(b.volumebarDown){b.volumebarDown=
!1;b._doc.off(r).off(t);if(q){if(d.originalEvent.touches&&d.originalEvent.touches.length)var g=d.originalEvent.touches;else if(d.originalEvent.changedTouches&&d.originalEvent.changedTouches.length)g=d.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=d;d.preventDefault();u(g.pageX);0==b.defaultVolume?(b.player_volume.find("img").attr("src",b.ic_mute),b.videoUp2Js.muted=!0):0<b.defaultVolume&&(b.player_volume.find("img").attr("src",b.ic_volume),b.videoUp2Js.muted=!1)}})}return!1}}
function u(c){b.defaultVolume=Math.max(0,Math.min(1,(c-b.volume_bg.offset().left)/b.volumeSize));b._setVolume()}function z(){b.videoInited&&(b.player_volume_tooltip.css("display","block"),b.volume_seekbar.on("mousemove",y).on("mouseout",w),b._doc.on("mouseout",w))}function w(){b.videoInited&&(b.player_volume_tooltip.css("display","none"),b.volume_seekbar.off("mousemove",y).off("mouseout",w),b._doc.off("mouseout",w))}function y(c){c=c.pageX-b.volume_bg.offset().left;0>c?c=0:c>b.volumeSize&&(c=b.volumeSize);
var d=parseInt(b.playerControls.css("width"),10)+c-parseInt(b.volume_seekbar.css("right"),10)-parseInt(b.volume_seekbar.css("width"),10)+parseInt(b.volume_bg.css("left"),10)-b.player_volume_tooltip.width()/2;b.player_volume_tooltip.css("left",d+"px");c=parseInt(100*Math.max(0,Math.min(1,c/b.volumeSize)),10);b.player_volume_tooltip_value.html(c+" %");c=b.player_volume_tooltip.width()/2-b.player_volume_tooltip_value.width()/2;b.player_volume_tooltip_value.css("left",c+"px")}var b=this;this.settings=
f.extend({},f.fn.videoGallery.defaults,e);this.useRollovers=(this.isMobile=MGCUtils.isMobile())?!1:!0;this.isIE=MGCUtils.isMobile();this.ic_volume="assets/media/data/video_icons/volume.png";this.ic_volume_on="assets/media/data/video_icons/volume_on.png";this.ic_mute="assets/media/data/video_icons/mute.png";this.ic_mute_on="assets/media/data/video_icons/mute_on.png";this.ic_pause="assets/media/data/video_icons/pause.png";this.ic_pause_on="assets/media/data/video_icons/pause_on.png";this.ic_play="assets/media/data/video_icons/play.png";this.ic_play_on=
"assets/media/data/video_icons/play_on.png";this.ic_fullscreen_enter="assets/media/data/video_icons/fullscreen_enter.png";this.ic_fullscreen_enter_on="assets/media/data/video_icons/fullscreen_enter_on.png";this.ic_fullscreen_exit="assets/media/data/video_icons/fullscreen_exit.png";this.ic_fullscreen_exit_on="assets/media/data/video_icons/fullscreen_exit_on.png";this.ic_player_prev="assets/media/data/video_icons/v_prev.png";this.ic_player_prev_on="assets/media/data/video_icons/v_prev_on.png";this.ic_player_next="assets/media/data/video_icons/v_next.png";
this.ic_player_next_on="assets/media/data/video_icons/v_next_on.png";this.ic_w_play="assets/media/data/video_icons/w_play.png";this.ic_w_pause="assets/media/data/video_icons/w_pause.png";this.ic_close="assets/media/data/video_icons/close.png";this.ic_close_on="assets/media/data/video_icons/close_on.png";this._componentInited=!1;this._body=f("body");this.bodyOverflowOrig=this._body.css("overflow");this._window=f(window);this._doc=f(document);this._windowResizeInterval=200;this._windowResizeIntervalID;this._mediaPath;this._mediaType;
this._vimeoPlayer;this._youtubePlayer;this._youtubeChromeless=this._youtubeInited=this._vimeoInited=!1;this.mg_gallery=this.settings.mg_gallery;this.mg_settings=this.settings.mg_settings;this.mg_wrapper=this.settings.wrapper;this.wrapperOverflowOrig=this.mg_wrapper.css("overflow");this.includeVideoInSlideshow=this.mg_settings.includeVideoInSlideshow;this.initialAutoplay=this.vim_autoPlay=this.yt_autoPlay=this.autoPlay=this.mg_settings.videoAutoPlay;this.videoLoop=this.mg_settings.videoLoop;this.defaultVolume=
this.mg_settings.videoVolume;0>this.defaultVolume?this.defaultVolume=0:1<this.defaultVolume&&(this.defaultVolume=1);this.useYoutubeHighestQuality=this.mg_settings.useYoutubeHighestQuality;this.componentWrapper=f(a);this.mediaPreloader=this.componentWrapper.find(".mediaPreloader").css("display","none");this.origPlayerSizeSet=!1;this.origPlayerW;this.origPlayerH;this.player_close=f(".player_close").css("cursor","pointer").on("click",function(){b.mg_gallery.closePlayer();return!1});if(b.useRollovers)this.player_close.on("mouseenter",
function(){b.player_close.children("img").attr("src",b.ic_close_on);return!1}).on("mouseleave",function(){b.player_close.children("img").attr("src",b.ic_close);return!1});this.playerRatio=this.componentWrapper.width()/this.componentWrapper.height();this.mediaHolder=this.componentWrapper.find(".mediaHolder").on("click",function(){b.togglePlayBack();return!1});this.youtubeHolder=this.componentWrapper.find(".youtubeHolder");this.youtubeWrapper=this.componentWrapper.find(".youtubeWrapper");this._hideYT();
this.vimeoHolder=this.componentWrapper.find(".vimeoHolder");this._componentWidth=this._getComponentSize("w");this._componentHeight=this._getComponentSize("h");this.playerControls=this.componentWrapper.find(".playerControls");this.playerControlsOrigL=parseInt(this.playerControls.css("left"),10);this.player_mediaTime=this.componentWrapper.find(".player_mediaTime");this.isIOS=!1;var n=navigator.userAgent;if(-1<n.indexOf("iPhone")||-1<n.indexOf("iPod")||-1<n.indexOf("iPad"))this.isIOS=!0,this.aspectRatio=
1;(this.isiPhoneIpod=-1<n.indexOf("iPhone")||-1<n.indexOf("iPod"))&&this.componentWrapper.find(".playerControls").remove();this.isAndroid=-1<n.indexOf("Android");this.isMobile&&(this.vim_autoPlay=this.yt_autoPlay=this.autoPlay=!1);this.fullscreenCount=0;this.fullscreenPossible=!1;this.checkFullScreenSupport()&&(this.fullscreenPossible=!0);if(this.fullscreenPossible)this._doc.on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){b.setFullscreenIcon();"fullscreen"==b.componentSize&&
0<b.fullscreenCount&&(b.componentSize="normal",b.resizeComponent());b.fullscreenCount=1});this.html5video_inited=!1;this.previewPoster;this.bigPlay=this.componentWrapper.find(".bigPlay").css("cursor","pointer").on("click",function(){b.togglePlayBack();return!1});(this.autoHideControls=this.isMobile?!1:!0)&&this.componentWrapper.mouseenter(function(c){b.showControls()}).mouseleave(function(){b.hideControls()});this.aspectRatio=1;this.videoInited=!1;this._mediaPath;this.mediaPlaying=!1;this.dataInterval=
100;this.dataIntervalID;this.mediaWidth;this.mediaHeight;this.componentSize="normal";this.video;this.videoUp2Js;this.mediaPreview=this.componentWrapper.find(".mediaPreview").on("click",function(){b.togglePlayBack();return!1});var r=n="",t="";if("ontouchstart"in window){var q=!0;n="touchstart.ap";r="touchmove.ap";t="touchend.ap"}else q=!1,n="mousedown.ap",r="mousemove.ap",t="mouseup.ap";this.seekPercent;this.seekBarDown=!1;this.player_progress=this.componentWrapper.find(".player_progress");this.progress_bg=
this.componentWrapper.find(".progress_bg");this.load_level=this.componentWrapper.find(".load_level");this.progress_level=this.componentWrapper.find(".progress_level");this.controlsMediaWidthDiff=20;this.controlsSeekbarDiff=280;this.seekBarSize=this.playerControls.width()-this.controlsSeekbarDiff;this.player_progress.css("cursor","pointer").on(n,function(c){h(c);return!1});this.player_progress_tooltip=this.componentWrapper.find(".player_progress_tooltip").css("left",parseInt(this.player_progress.css("left"),
10)+"px");this.player_progress_tooltip_value=this.componentWrapper.find(".player_progress_tooltip_value");if(!this.isMobile)this.player_progress.on("mouseover",l);this.player_volume=this.componentWrapper.find(".vplayer_volume");this._lastVolume=this.defaultVolume;this.volumebarDown=!1;this.volume_seekbar=this.componentWrapper.find(".volume_seekbar");this.volume_bg=this.componentWrapper.find(".volume_bg");this.volume_level=this.componentWrapper.find(".volume_level");this.volumeSize=this.volume_bg.width();
this.volume_level.css("width",this.defaultVolume*this.volumeSize+"px");0==this.defaultVolume?(this._lastVolume=.5,this.player_volume.find("img").attr("src",this.ic_mute)):0<this.defaultVolume&&this.player_volume.find("img").attr("src",this.ic_volume);this.volume_seekbar.css("cursor","pointer").on(n,function(c){v(c);return!1});this.player_volume_tooltip=this.componentWrapper.find(".player_volume_tooltip").css("left",parseInt(this.volume_seekbar.css("left"),10)+"px");this.player_volume_tooltip_value=
this.componentWrapper.find(".player_volume_tooltip_value");if(!this.isMobile)this.volume_seekbar.on("mouseover",z);this.player_playControl=this.componentWrapper.find(".player_playControl").css("cursor","pointer").on("click",function(){b.togglePlayBack();return!1});if(b.useRollovers)this.player_playControl.on("mouseover",function(){b.mediaPlaying?b.componentWrapper.find(".player_playControl").find("img").attr("src",b.ic_pause_on):b.componentWrapper.find(".player_playControl").find("img").attr("src",
b.ic_play_on);return!1}).on("mouseout",function(){b.mediaPlaying?b.componentWrapper.find(".player_playControl").find("img").attr("src",b.ic_pause):b.componentWrapper.find(".player_playControl").find("img").attr("src",b.ic_play);return!1});this.player_volume.css("cursor","pointer").on("click",function(){0==b.defaultVolume?(b.defaultVolume=b._lastVolume,b.videoUp2Js.muted=!1,b._setVolume(),b.player_volume.find("img").attr("src",b.ic_volume)):(b._lastVolume=b.defaultVolume,b.videoUp2Js.muted=!0,b.defaultVolume=
0,b._setVolume(),b.player_volume.find("img").attr("src",b.ic_mute));return!1});if(b.useRollovers)this.player_volume.on("mouseover",function(){0==b.defaultVolume?b.player_volume.find("img").attr("src",b.ic_mute_on):b.player_volume.find("img").attr("src",b.ic_volume_on);return!1}).on("mouseout",function(){0==b.defaultVolume?b.player_volume.find("img").attr("src",b.ic_mute):b.player_volume.find("img").attr("src",b.ic_volume);return!1});this.player_fullscreen=this.componentWrapper.find(".player_fullscreen").css("cursor",
"pointer").on("click",function(){b.toggleFullscreen(!0);return!1});if(b.useRollovers)this.player_fullscreen.on("mouseover",function(){"normal"==b.componentSize?b.player_fullscreen.find("img").attr("src",b.ic_fullscreen_enter_on):b.player_fullscreen.find("img").attr("src",b.ic_fullscreen_exit_on);return!1}).on("mouseout",function(){"normal"==b.componentSize?b.player_fullscreen.find("img").attr("src",b.ic_fullscreen_enter):b.player_fullscreen.find("img").attr("src",b.ic_fullscreen_exit);return!1});
this._window.on("resize",function(){if(!b._componentInited)return!1;b._windowResizeIntervalID&&clearInterval(b._windowResizeIntervalID);b._windowResizeIntervalID=setTimeout(function(){b._doneResizing()},b._windowResizeInterval);return!1});this._doneResizing();b.componentWrapper.css({display:"none",opacity:1});b._componentInited||(b._componentInited=!0,b.settings.videoGallerySetupDone.call(b))}x.prototype={playMedia:function(){if(!this._componentInited||this._playlistTransitionOn||!this._mediaType)return!1;
"local"==this._mediaType?this.togglePlayBack():"vimeo"==this._mediaType?this._vimeoPlayer&&this._vimeoPlayer.play():"youtube"==this._mediaType&&this._youtubePlayer&&this._youtubePlayer.play();this.mediaPlaying=!0},pauseMedia:function(){if(!this._componentInited||this._playlistTransitionOn||!this._mediaType)return!1;"local"==this._mediaType?this.togglePlayBack():"vimeo"==this._mediaType?this._vimeoPlayer&&this._vimeoPlayer.pause():"youtube"==this._mediaType&&this._youtubePlayer&&this._youtubePlayer.pause();
this.mediaPlaying=!1},setVolume:function(a){if(!this._componentInited||this._playlistTransitionOn||!this._mediaType)return!1;0>a?a=0:1<a&&(a=1);this.defaultVolume=a;this._setVolume()},loadPreview:function(a){var e=this;this.mediaPreview.css("display","block");this.mediaPreloader&&this.mediaPreloader.css("display","block");this.previewPoster=f(new Image).css({position:"absolute",display:"block",opacity:0}).appendTo(this.mediaPreview).on("load",function(){e._resizeControls();e.mediaPreloader&&e.mediaPreloader.css("display",
"none");e.resizePreview();e.previewPoster.animate({opacity:1},{duration:500,easing:"easeOutSine"});e.bigPlay&&e.bigPlay.css("display","block")}).attr("src",a).error(function(h){})},togglePlayBack:function(){var a=this;this.videoInited||this.autoPlay?this.videoUp2Js.paused?this.videoUp2Js.play():this.videoUp2Js.pause():(this.previewPoster&&this.previewPoster.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){a.previewPoster.remove();a.previewPoster=null}}),this._initLocal());
this.videoInited=!0;return!1},showControls:function(){this.videoInited&&this.playerControls.css("display","block")},hideControls:function(){this.playerControls.css("display","none")},resizeComponent:function(){"local"==this._mediaType&&this.playerControls.css("left","10000px");"fullscreen"==this.componentSize?(this._body.css("overflow","hidden"),this.mg_wrapper.css("overflow","visible"),this.componentWrapper.removeClass("videoPlayer").addClass("videoPlayer_fs"),this.player_close.css("display","none")):
(this._body.css("overflow",this.bodyOverflowOrig),this.mg_wrapper.css("overflow",this.wrapperOverflowOrig),this.componentWrapper.removeClass("videoPlayer_fs").addClass("videoPlayer"),this.player_close.css("display","block"));"local"==this._mediaType&&(this.previewPoster&&this.resizePreview(),this.videoInited&&(this.resizeVideo(),this._resizeControls(),this.playerControls.css("left",this.playerControlsOrigL+"px")))},resizePreview:function(){if(this.previewPoster){var a,e=this.previewPoster;0!=this.aspectRatio&&
(1==this.aspectRatio?a=this.retrieveObjectRatio(!0,e):2==this.aspectRatio&&(a=this.retrieveObjectRatio(!1,e)));if("normal"==this.componentSize){var h=(this._getPlayerSize("w")-a.width)/2;var k=(this._getPlayerSize("h")-a.height)/2}else h=(this._getComponentSize("w")-a.width)/2,k=(this._getComponentSize("h")-a.height)/2;e.css({width:a.width+"px",height:a.height+"px",left:h+"px",top:k+"px"})}},resizeVideo:function(){if(this.video){var a;0==this.aspectRatio?a=this.getMediaSize():1==this.aspectRatio?
a=this.retrieveObjectRatio(!0):2==this.aspectRatio&&(a=this.retrieveObjectRatio(!1));if("normal"==this.componentSize){var e=(this._getPlayerSize("w")-a.width)/2;var h=(this._getPlayerSize("h")-a.height)/2}else e=(this._getComponentSize("w")-a.width)/2,h=(this._getComponentSize("h")-a.height)/2;this.video.css({width:a.width+"px",height:a.height+"px",left:e+"px",top:h+"px"})}},retrieveObjectRatio:function(a,e){if("normal"==this.componentSize)var h=this._getPlayerSize("w"),k=this._getPlayerSize("h");
else h=this._getComponentSize("w"),k=this._getComponentSize("h");var l={};if(e){var m=e.width();var p=e.height()}else e=this.getMediaSize(),m=e.width,p=e.height;var v=(h-0)/(k-0),u=m/p;u<v?a?(l.width=(k-0)/p*m,l.height=k-0):(l.height=(h-0)/m*p,l.width=h-0):u>v?a?(l.height=(h-0)/m*p,l.width=h-0):(l.width=(k-0)/p*m,l.height=k-0):(l.width=h-0,l.height=k-0);return l},getMediaSize:function(){var a={};this.videoUp2Js?(a.width=this.videoUp2Js.videoWidth,a.height=this.videoUp2Js.videoHeight):(a.width=this._getPlayerSize("w"),
a.height=this._getPlayerSize("h"));return a},resetData:function(){this.player_mediaTime.html("00:00 | 00:00");this.progress_level.css("width","0px");this.load_level.css("width","0px")},canPlayVorbis:function(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/ogg; codecs="theora, vorbis"').replace(/no/,""))},canPlayMP4:function(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,
""))},canPlayWebM:function(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,""))},formatCurrentTime:function(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)},formatDuration:function(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return" | "+minutes+":"+(10<=a?a:"0"+a)},setFullscreenIcon:function(){document.fullScreenElement&&
null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?this.player_fullscreen.children("img").attr("src",this.ic_fullscreen_enter):this.player_fullscreen.children("img").attr("src",this.ic_fullscreen_exit)},fullScreenStatus:function(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen},toggleFullscreen:function(a){this.fullScreenStatus()?this.fullscreenPossible?(this.componentSize="normal"==this.componentSize&&a?"fullscreen":"normal",
this.resizeComponent()):this._doneResizing():(this.fullscreenCount=0,"normal"==this.componentSize?(this.componentSize="fullscreen",this.fullscreenPossible||this.componentWrapper.find(".player_fullscreen").find("img").attr("src",this.ic_fullscreen_exit)):(this.componentSize="normal",this.fullscreenPossible||this.componentWrapper.find(".player_fullscreen").find("img").attr("src",this.ic_fullscreen_enter)),this.fullscreenPossible&&(document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&
!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()),this.fullscreenPossible?
"normal"==this.componentSize&&a&&this.resizeComponent():this._doneResizing())},checkFullScreenSupport:function(){var a=!1;document.documentElement.requestFullScreen?a=!0:document.documentElement.mozRequestFullScreen?a=!0:document.documentElement.webkitRequestFullScreen&&(a=!0);return a},_findMedia:function(a,e){this._cleanMedia();this._mediaType=a;if("local"==this._mediaType){var h=e.preview;this._mediaPath=e.mp4;this.autoPlay?(this._resizeControls(),this._initLocal()):this.loadPreview(h)}else"vimeo"==
this._mediaType?(this._mediaPath=e,this._initVimeo()):"youtube"==this._mediaType?(this._mediaPath=e,this._initYoutube()):alert("Wrong data-type in playlist!")},_cleanMedia:function(){if("local"==this._mediaType){this.mediaPreview.css("display","none");this.hideControls();if(this.videoUp2Js){this.videoUp2Js.pause();try{this.videoUp2Js.currentTime=0}catch(a){}this.videoUp2Js.src=""}this.video&&this.video.off("ended loadedmetadata waiting playing play pause");this.mediaHolder.css("display","none");this.isMobile||
(this.mediaHolder.html(""),this.html5video_inited=!1);this.bigPlay&&this.bigPlay.css("display","none");this.mediaPreloader&&this.mediaPreloader.css("display","none");this.previewPoster&&(this.previewPoster.remove(),this.previewPoster=null);this.resetData();this.videoInited=this.mediaPlaying=!1}else"vimeo"==this._mediaType?this._vimeoPlayer&&this._vimeoPlayer.clean():"youtube"==this._mediaType&&(this._youtubePlayer&&this._youtubePlayer.stop(),this._hideYT())},_setVolume:function(){"local"==this._mediaType?
(this.volume_level.width(this.defaultVolume*this.volumeSize),this.videoUp2Js.volume=this.defaultVolume):"vimeo"==this._mediaType?this._vimeoPlayer&&this._vimeoPlayer.setVolume(this.defaultVolume):"youtube"==this._mediaType&&this._youtubePlayer&&this._youtubePlayer.setVolume(this.defaultVolume)},_initLocal:function(){var a=this;if(this.html5video_inited)this.mediaHolder.css("display","block"),this.videoUp2Js.src=this._mediaPath,this.videoUp2Js.load();else{var e='<video class="video_cont" width="100%" height="100%" playsinline><source src="'+
(this._mediaPath+'" />');e+="</video>";this.mediaHolder.css("display","block").html(e);this.video=this.mediaHolder.find(".video_cont");this.videoUp2Js=this.video[0]}this.videoUp2Js.volume=this.defaultVolume;this.video.css("position","absolute").on("ended",function(){if(a.mg_gallery.getSlideshowForcePause())if(a.includeVideoInSlideshow)a.mg_gallery.videoEnd();else{try{a.videoUp2Js.currentTime=0}catch(h){}a.videoLoop?a.videoUp2Js.paused&&a.videoUp2Js.play():a.videoUp2Js.pause()}else{try{a.videoUp2Js.currentTime=
0}catch(h){}a.videoLoop?a.videoUp2Js.paused&&a.videoUp2Js.play():a.videoUp2Js.pause()}}).on("loadedmetadata",function(){a.resizeVideo();a.dataIntervalID&&clearInterval(a.dataIntervalID);a.dataIntervalID=setInterval(function(){isNaN(a.videoUp2Js.currentTime)||isNaN(a.videoUp2Js.duration)||a.player_mediaTime.html(a.formatCurrentTime(a.videoUp2Js.currentTime)+a.formatDuration(a.videoUp2Js.duration));if(!a.seekBarDown){a.progress_level.css("width",a.videoUp2Js.currentTime/a.videoUp2Js.duration*a.seekBarSize+
"px");try{var h=Math.floor(a.videoUp2Js.buffered.end(0))}catch(k){}h/=Math.floor(a.videoUp2Js.duration);isNaN(h)||a.load_level.css("width",h*a.seekBarSize+"px")}},a.dataInterval);a.videoUp2Js.play();a.videoInited=!0;a.isMobile&&a.initialAutoplay&&(a.autoPlay=!0);a.showControls();a.isIOS&&a._resizeControls();a.fullScreenStatus()&&a.player_fullscreen.children("img").attr("src",a.ic_fullscreen_enter)}).on("waiting",function(){a.mediaPreloader&&a.mediaPreloader.css("display","block")}).on("playing",function(){a.mediaPreloader&&
a.mediaPreloader.css("display","none")}).on("play",function(){a.componentWrapper.find(".player_playControl").find("img").attr("src",a.ic_pause);a.bigPlay&&a.bigPlay.css("display","none");a.mediaPlaying=!0}).on("pause",function(){a.componentWrapper.find(".player_playControl").find("img").attr("src",a.ic_play);a.bigPlay&&a.bigPlay.css("display","block");a.mediaPlaying=!1});this.isIOS&&!this.html5video_inited?(this.videoUp2Js.src=this._mediaPath,this.videoUp2Js.load()):this.isAndroid&&!this.html5video_inited&&
(this.videoUp2Js.play(),this.bigPlay&&this.bigPlay.css("display","none"),this.previewPoster&&this.previewPoster.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){a.previewPoster.remove();a.previewPoster=null}}),this.videoInited=!0,this.showControls());this.html5video_inited=!0},_initVimeo:function(){var a=this;this._vimeoInited?this._vimeoPlayer.initVideo(this._mediaPath):(this._vimeoPlayer=f.vimeoPlayer({autoPlay:this.vim_autoPlay,defaultVolume:this.defaultVolume,
mediaPath:this._mediaPath,vimeoHolder:this.vimeoHolder,isMobile:this.isMobile,initialAutoplay:this.initialAutoplay}),f(this._vimeoPlayer).on("ap_VimeoPlayer.VIMEO_READY",function(){}),f(this._vimeoPlayer).on("ap_VimeoPlayer.VIMEO_PLAY",function(){a.mediaPlaying=!0}),f(this._vimeoPlayer).on("ap_VimeoPlayer.VIMEO_PAUSE",function(){a.mediaPlaying=!1}),f(this._vimeoPlayer).on("ap_VimeoPlayer.END_PLAY",function(){a.videoEndAction(a._vimeoPlayer)}),this._vimeoInited=!0)},_initYoutube:function(){var a=this;
a._showYT();this._youtubeInited?this._youtubePlayer.initVideo(this._mediaPath):(this._youtubePlayer=f.youtubePlayer({autoPlay:this.yt_autoPlay,defaultVolume:this.defaultVolume,mediaPath:this._mediaPath,youtubeHolder:this.youtubeHolder,youtubeChromeless:this._youtubeChromeless,isMobile:this.isMobile,initialAutoplay:this.initialAutoplay,quality:this.useYoutubeHighestQuality}),f(this._youtubePlayer).on("ap_YoutubePlayer.FORCE_MAIN_STOP",function(){a._hideYT()}),f(this._youtubePlayer).on("ap_YoutubePlayer.YT_READY",
function(){}),f(this._youtubePlayer).on("ap_YoutubePlayer.START_PLAY",function(){a.mediaPlaying=!0}),f(this._youtubePlayer).on("ap_YoutubePlayer.STATE_PLAYING",function(){a.mediaPlaying=!0}),f(this._youtubePlayer).on("ap_YoutubePlayer.STATE_PAUSED",function(){a.mediaPlaying=!1}),f(this._youtubePlayer).on("ap_YoutubePlayer.END_PLAY",function(){a.videoEndAction(a._youtubePlayer)}),this._youtubeInited=!0)},videoEndAction:function(a){this.mg_gallery.getSlideshowForcePause()?this.includeVideoInSlideshow?
this.mg_gallery.videoEnd():this.videoLoop&&(this.isMobile?this.initialAutoplay&&a.play():this.yt_autoPlay&&a.play()):this.videoLoop&&(this.isMobile?this.initialAutoplay&&a.play():this.yt_autoPlay&&a.play())},_showYT:function(){this.youtubeWrapper.css("left","0px")},_setYTSizeIE:function(){if(this.isIE){var a=this._getPlayerSize("w"),e=this._getPlayerSize("h");this.youtubeHolder.css({width:a+2+"px",height:e+2+"px",left:"-1px",top:"-1px"})}},_hideYT:function(){this.youtubeWrapper.css("left","-10000px")},
_getComponentSize:function(a){return"w"==a?"normal"==this.componentSize?this.componentWrapper.width():this.getDocumentWidth():"normal"==this.componentSize?this.componentWrapper.height():this.getDocumentHeight()},_getPlayerSize:function(a){return"w"==a?this.componentWrapper.width():this.componentWrapper.height()},getDocumentWidth:function(){return Math.max(f(window).width(),document.documentElement.clientWidth)},getDocumentHeight:function(){return Math.max(f(window).height(),document.documentElement.clientHeight)},
_preventSelect:function(a){f(a).each(function(){f(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})},_doneResizing:function(){"landscape"==(window.innerWidth>window.innerHeight?"landscape":"portrait")?(this.componentWrapper.addClass("video-player-landscape"),this.componentWrapper.removeClass("video-player-portrait")):(this.componentWrapper.removeClass("video-player-landscape"),
this.componentWrapper.addClass("video-player-portrait"));"fullscreen"==this.componentSize&&this.resizeComponent();this._componentWidth=this._getComponentSize("w");this._componentHeight=this._getComponentSize("h");this._mediaType&&"local"==this._mediaType&&(this.previewPoster&&this.resizePreview(),this.videoInited&&this.resizeComponent(),this._resizeControls())},_resizeControls:function(){var a="normal"==this.componentSize?this.componentWrapper.width():this._getComponentSize("w");this.playerControls.width(a-
this.controlsMediaWidthDiff);this.seekBarSize=this.playerControls.width()-this.controlsSeekbarDiff;this.progress_bg.width(this.seekBarSize);this.player_progress.width(this.seekBarSize+20)}};f.fn.videoGallery=function(a){return this.each(function(){f.fn.videoGallery.playMedia=function(){e.playMedia()};f.fn.videoGallery.pauseMedia=function(){e.pauseMedia()};f.fn.videoGallery.setVolume=function(h){e.setVolume(h)};var e=new x(f(this),a);f(this).data("videoGallery",e)})};f.fn.videoGallery.defaults={videoGallerySetupDone:function(){}};
f.fn.videoGallery.settings={}})(jQuery);