(function(e){e.fn.html5audio=function(k){function wb(a){if(m&&!q&&!Z){if(!ha){if(U){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();ha=!0;M.on(aa,function(b){a:{if(U){if(b.originalEvent.touches&&b.originalEvent.touches.length)var c=b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)c=b.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=b;b.preventDefault();Wa(c.pageX)}});M.on(ba,function(b){a:if(ha){ha=
!1;M.off(aa).off(ba);if(U){if(b.originalEvent.touches&&b.originalEvent.touches.length)var c=b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)c=b.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=b;b.preventDefault();Wa(c.pageX)}})}return!1}}function Wa(a){B=Math.max(0,Math.min(1,(a-sa.offset().left)/ca));ta()}function ta(){xb.css("width",B*ca+"px");p&&(p.volume=B);0<B?d.find(".player_volume").find("img").attr("src",Xa):
d.find(".player_volume").find("img").attr("src",Ya)}function yb(){C&&(ia.css("display","block"),ja.on("mousemove",Za).on("mouseout",ua),M.on("mouseout",ua))}function ua(){C&&(ia.css("display","none"),ja.off("mousemove",Za).off("mouseout",ua),M.off("mouseout",ua))}function Za(a){a=a.pageX-sa.offset().left;0>a?a=0:a>ca&&(a=ca);var b=a+parseInt(ja.css("left"),10)+parseInt(zb.css("left"),10)+parseInt(sa.css("left"),10)-ia.width()/2;ia.css("left",b+"px");a=parseInt(100*Math.max(0,Math.min(1,a/ca)),10);
ia.find("p").html(a+" %")}function Ab(a){if(m&&C&&!ha&&!va){if(!Z){if(U){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Z=!0;M.on(aa,function(b){a:{if(U){if(b.originalEvent.touches&&b.originalEvent.touches.length)var c=b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)c=b.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=b;b.preventDefault();$a(c.pageX)}});M.on(ba,function(b){a:if(Z){Z=
!1;M.off(aa).off(ba);if(U){if(b.originalEvent.touches&&b.originalEvent.touches.length)var c=b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)c=b.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=b;b.preventDefault();$a(c.pageX)}})}return!1}}function $a(a){V=a-ab.offset().left;0>V?V=0:V>W&&(V=W);wa.width(V);var b=Math.max(0,Math.min(1,V/W));if(p&&!isNaN(p.duration)){a=p.duration;b*=a;b>a-2&&(b=a-2);try{p.currentTime=b}catch(c){console.log(c)}}}
function Bb(){C&&(ka.css("display","block"),da.on("mousemove",bb).on("mouseout",xa),M.on("mouseout",xa))}function xa(){C&&(ka.css("display","none"),da.off("mousemove",bb).off("mouseout",xa),M.off("mouseout",xa))}function bb(a){a=a.pageX-da.offset().left;0>a?a=0:a>W&&(a=W);var b=a+parseInt(da.css("left"),10)-ka.width()/2;ka.css("left",b+"px");a=Math.max(0,Math.min(1,a/W))*p.duration;!isNaN(a)&&p&&ka.find("p").html(Ia(a)+Cb+cb(p.duration/1E3))}function Ja(){E?(E.reinitialise(),E.scrollToY(0)):(E=X.jScrollPane().data().jsp,
X.on("jsp-initialised",function(a,b){}).jScrollPane({verticalDragMinHeight:30,verticalDragMaxHeight:40}))}function db(a){x?(p.pause(),x=!1,a?d.find(".controls_toggle").find("img").attr("src",O?P:Ka):d.find(".controls_toggle").find("img").attr("src",O?Ka:P)):(p.play(),x=!0,a?d.find(".controls_toggle").find("img").attr("src",O?la:La):d.find(".controls_toggle").find("img").attr("src",O?La:la));return!1}function Ma(a){if(m&&!q)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&
a.stopPropagation(),a=e(a.currentTarget).attr("data-id"),R(),f.processPlaylistRequest(a),!1}function R(){if(-1!=f.getCounter()){var a=e(F[f.getCounter()]);a&&a.removeClass("playlistSelected").addClass("playlistNonSelected")}}function eb(){var a=e(F[f.getCounter()]);a&&a.removeClass("playlistNonSelected").addClass("playlistSelected")}function Db(a){if(m&&!q){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=e(a.currentTarget).attr("class");if("controls_prev"==
a){if(!C)return;R();f.advanceHandler(-1,!0)}else if("controls_toggle"==a){if(!C)return;db(!0)}else if("controls_next"==a){if(!C)return;R();f.advanceHandler(1,!0)}else if("player_volume"==a){if(fb)return!1;ya?(B=gb,ya=!1):(gb=B,B=0,ya=!0);ta()}else"player_loop"==a?(I?(d.find(".player_loop").find("img").attr("src",za),I=!1):(d.find(".player_loop").find("img").attr("src",ma),I=!0),f.setLooping(I)):"player_shuffle"==a&&(J?(d.find(".player_shuffle").find("img").attr("src",Aa),J=!1):(d.find(".player_shuffle").find("img").attr("src",
na),J=!0),f.setRandom(J));return!1}}function Eb(a){if(m)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=e(a.currentTarget).attr("class"),"controls_prev"==a?d.find(".controls_prev").find("img").attr("src",Fb):"controls_toggle"==a?x?d.find(".controls_toggle").find("img").attr("src",La):d.find(".controls_toggle").find("img").attr("src",Ka):"controls_next"==a?d.find(".controls_next").find("img").attr("src",Gb):"player_volume"==a?0<B?d.find(".player_volume").find("img").attr("src",
Hb):d.find(".player_volume").find("img").attr("src",Ib):"player_loop"==a?I?d.find(".player_loop").find("img").attr("src",za):d.find(".player_loop").find("img").attr("src",ma):"player_shuffle"==a&&(J?d.find(".player_shuffle").find("img").attr("src",Aa):d.find(".player_shuffle").find("img").attr("src",na)),!1}function Jb(a){if(m)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=e(a.currentTarget).attr("class"),"controls_prev"==a?d.find(".controls_prev").find("img").attr("src",
Kb):"controls_toggle"==a?x?d.find(".controls_toggle").find("img").attr("src",la):d.find(".controls_toggle").find("img").attr("src",P):"controls_next"==a?d.find(".controls_next").find("img").attr("src",Lb):"player_volume"==a?0<B?d.find(".player_volume").find("img").attr("src",Xa):d.find(".player_volume").find("img").attr("src",Ya):"player_loop"==a?I?d.find(".player_loop").find("img").attr("src",ma):d.find(".player_loop").find("img").attr("src",za):"player_shuffle"==a&&(J?d.find(".player_shuffle").find("img").attr("src",
na):d.find(".player_shuffle").find("img").attr("src",Aa)),!1}function hb(){h&&-1!=f.getCounter()&&(Na(),ib(),d.find(".controls_toggle").find("img").attr("src",P),R())}function oa(){Na();ib();var a=0;for(a;a<r;a++)e(F[a]).off("click",Ma);"hidden"!=h&&h.remove();h=null;f.reSetCounter();w=[];F=[];K=[];O&&(ea=!1);E&&E.reinitialise()}function jb(a){kb();X.css("opacity",0);h&&oa();var b=Mb.find(a).css("display","block").clone();E?b.appendTo(E.getContentPane()):b.appendTo(X);0==b.length?l&&alert('Failed to select playlist! Make sure that element: "'+
a+'" exist in playlist list! Quitting.'):(h=b,w=[],F=[],K=[],L=[],b.find("li[class='playlistItem']").each(function(){_item=e(this);L.push(_item)}),Y())}function Y(){if(L.length)Nb();else{r=K.length;var a=0,b;for(a;a<r;a++){var c=e(F[a]).on("click",Ma).attr("data-id",a);var n=c.html();if(Oa){var g=Ba(a)+". "+n;c.html(g)}c=e(K[a]);g=b="";var z=void 0;void 0!=c.attr("data-mp3Path")&&(b=c.attr("data-mp3Path"));void 0!=c.attr("data-type")&&(g=c.attr("data-type"));void 0!=c.attr("data-length")&&(z=c.attr("data-length"));
w.push({id:a,type:g,title:n,mp3Path:b,length:z})}X.css("opacity",1);Pa&&Ja();m||(m=!0,"undefined"!==typeof audioPlayerSetupDone&&audioPlayerSetupDone());0==r?(l&&alert("Processing playlist failed. Quitting."),q=!1,Ca()):(q=!1,Ca(),f.setPlaylistItems(r),Qa(),"undefined"!==typeof audioPlayerPlaylistLoaded&&audioPlayerPlaylistLoaded())}}function Nb(){var a=L[0],b=a.attr("data-type").toLowerCase(),c=a.attr("data-path");G=[];if("local"==b)K.push(a),F.push(a.find("a[class='playlistNonSelected']")),L.shift(),
Y();else if("soundcloud"==b)a.remove(),Ra(c);else if("podcast"==b)a.remove(),b="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&num=10&callback=?&q="+encodeURIComponent(c),e.ajax({type:"GET",url:b,dataType:"jsonp",cache:!1,success:function(t){lb.html(t.responseData.xmlString);t=lb.get(0).getElementsByTagName("item");var u=0,D=t.length;for(u;u<D;u++){var v=t[u];var N={type:"podcast"};N.mp3=v.getElementsByTagName("enclosure")[0].getAttribute("url");N.ogg="";if(void 0!=v.getElementsByTagName("itunes:duration")[0]){var Da=
v.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue.split(":");for(var mb=0,nb=1;0<Da.length;)mb+=nb*parseInt(Da.pop()),nb*=60;Da=mb;N.length=parseInt(1E3*Da,10)}N.title=v.getElementsByTagName("title")[0].childNodes[0].nodeValue;G.push(N)}pa()},error:function(t,u){l&&alert("Parse feed error: "+u);l&&alert("Playlist selection failed: "+c);L.shift();Y()}});else if("folder"==b)a.remove(),jQuery.getJSON("folder_parser.php","folderUrl="+c,function(t){var u=0,D=t.length;for(u;u<D;u++){var v=
t[u];v.indexOf("\\")&&(v=v.replace(/\\/g,"/"));var N={type:"local"};v.indexOf(".mp3")&&(N.mp3=v);N.ogg=v.substr(0,v.lastIndexOf("."))+".ogg";no_ext=v.substr(0,v.lastIndexOf("."));v=no_ext.indexOf("/")?no_ext.substr(no_ext.lastIndexOf("/")+1):no_ext;v=v.split("_").join(" ");N.title=v;G.push(N)}pa()}).error(function(){l&&alert("Read folder error! Make sure you run this online or on local server!");l&&alert("Playlist selection failed: "+c);L.shift();Y()});else if("xml"==b){Sa=a;a.css("display","none");
var n,g,z,Q,H,A;e.ajax({type:"GET",url:c,dataType:"html",cache:!1,success:function(t){e(t).find("li[class='playlistItem']").each(function(){A=e(this);H=A.attr("data-type");n=e("<div>").append(A.clone()).html();"local"==H?(g=document.createElement("ul"),g.innerHTML=n,z=g.firstChild,Q=g.firstChild.firstChild,Sa.after(e(z)),Sa=e(z),K.push(e(z)),F.push(e(Q))):"xml"==H?l&&alert("You cannot load xml over xml, this feature is not supported. Skipping processing of playlist: "+n):L.push(A)});a.remove();L.shift();
Y()},error:function(t,u){l&&alert("Parse xml error! Make sure you run this online or on local server!");l&&alert("Playlist selection failed: "+c);L.shift();Y()}})}else l&&alert("Invalid playlist data-type attribute!")}function pa(){if(G.length){var a=0,b=G.length;for(a;a<b;a++){var c=e('<li class= "playlistItem" data-type="'+G[a].type+'" data-mp3Path="'+G[a].mp3+'"></li>').addClass("playlistItem").appendTo(h);G[a].length&&c.attr("data-length",G[a].length);var n=e('<a class="playlistNonSelected" href="#">'+
G[a].title+"</a>").addClass("playlistNonSelected").appendTo(c);K.push(c);F.push(n)}}L.shift();Y()}function Ta(a){var b=F.length?!1:!0;for(a;a<r;a++){if(!b){var c=e(F[a]).attr("data-id",a);if(Oa){var n=c.html();n=n.substr(n.indexOf(".")+2);w[a].title=n;n=Ba(a)+". "+n;c.html(n)}}w[a].id=a}}function Qa(){var a=k.activeItem;-1!=a?(0>a?a=0:a>r-1&&(a=r-1),f.setCounter(a,!1)):ea=!0}function Ra(a){e.getJSON(Ob(a,Ea),function(b){var c;if(b.tracks){var n=b.tracks.length;for(c=0;c<n;c++){var g={type:"soundcloud"};
b.tracks[c].duration&&(g.length=b.tracks[c].duration);g.thumbUrl=b.tracks[c].artwork_url?b.tracks[c].artwork_url:"";g.mp3=b.tracks[c].stream_url+(/\?/.test(b.tracks[c].stream_url)?"&":"?")+"consumer_key="+Ea;g.ogg="";g.title=b.tracks[c].title;G.push(g)}pa()}else if(b.duration)b.permalink_url=a,g={type:"soundcloud"},b.duration&&(g.length=b.duration),g.thumbUrl=b.artwork_url?b.artwork_url:"",g.mp3=b.stream_url+(/\?/.test(b.stream_url)?"&":"?")+"consumer_key="+Ea,g.ogg="",g.title=b.title,G.push(g),pa();
else if(b.username)/favorites/.test(a)?Ra(b.uri+"/favorites"):Ra(b.uri+"/tracks");else if(e.isArray(b)){n=b.length;for(c=0;c<n;c++)g={type:"soundcloud"},b[c].duration&&(g.length=b[c].duration),g.thumbUrl=b[c].artwork_url?b[c].artwork_url:"",g.mp3=b[c].stream_url+(/\?/.test(b[c].stream_url)?"&":"?")+"consumer_key="+Ea,g.ogg="",g.title=b[c].title,G.push(g);pa()}}).error(function(){l&&alert("SoundCloud process error!");q=!1})}function Ob(a,b){return(/api\./.test(a)?a+"?":"http://api.soundcloud.com/resolve?url="+
a+"&")+"format=json&consumer_key="+b+"&callback=?"}function Na(){p&&(p.pause(),p.src="");S&&S.off("ended canplay canplaythrough timeupdate loadedmetadata pause play error seeked");Fa();Ua=C=x=va=!1}function Pb(){S.on("ended",function(){"undefined"!==typeof audioPlayerSoundEnd&&audioPlayerSoundEnd(f.getCounter());R();f.advanceHandler(1,!0)}).on("canplay",function(b){}).on("canplaythrough",function(b){}).on("timeupdate",function(b){b=p.currentTime;var c=p.duration;isNaN(b)||qa.html(Ia(b)+ob);isNaN(b)||
isNaN(c)?va=!0:(qa.html(Ia(b)+ob),Ga.html(cb(c)),Z||wa.width(b/c*W),va=!1)}).on("loadedmetadata",function(){}).on("play",function(){Ua||("undefined"!==typeof audioPlayerSoundStart&&audioPlayerSoundStart(f.getCounter()),Ua=!0);"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay()}).on("pause",function(){"undefined"!==typeof audioPlayerSoundPause&&audioPlayerSoundPause()}).on("seeked",function(){}).on("error",function(b){});p.src=pb;if(ea){var a=p.play();void 0!==a&&a.then(function(){})["catch"](function(b){console.log(b)})}ea?
(x=!0,d.find(".controls_toggle").find("img").attr("src",la)):(x=!1,d.find(".controls_toggle").find("img").attr("src",P));ta();ea=C=!0}function Ca(){qb.css("display","none")}function kb(){qb.css("display","block")}function ib(){y&&ra&&y.deactivate();T.html(Va);qa.html(rb);Ga.html(sb);wa.width(0);tb.width(0);d.find(".controls_toggle").find("img").attr("src",P)}function Fa(){ub||(y&&y.deactivate(),T.html(Va));qa.html(rb);Ga.html(sb);wa.width(0);tb.width(0);d.find(".controls_toggle").find("img").attr("src",
P)}function Ia(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function cb(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function fa(a){return 0==w[a].title.replace(/^\s+|\s+$/g,"").length?(T.html(Va),!1):Ba(w[a].id)+". "+w[a].title}function Ba(a){return 9>a?"0"+(a+1):a+1}var m=!1;e("body");e(window);var M=e(document),
O=MGCUtils.isMobile(),fb=MGCUtils.isIOS(),S=e(document.createElement("audio")),p=S[0],d=e(k.playerHolder);d.find(".componentPlaylist");var X=d.find(".playlist_inner").css("opacity",0);d.find(".playlistHolder");d.find(".playerHolder");d.find(".player_mediaTime");var qa=d.find(".player_mediaTime_current"),Ga=d.find(".player_mediaTime_total"),Qb=d.find(".player_mediaName_Mask"),T=d.find(".player_mediaName"),zb=d.find(".player_controls"),qb=d.find(".preloader"),Kb=k.buttonsUrl.prev,Fb=k.buttonsUrl.prevOn,
Lb=k.buttonsUrl.next,Gb=k.buttonsUrl.nextOn,P=k.buttonsUrl.play,Ka=k.buttonsUrl.playOn,la=k.buttonsUrl.pause,La=k.buttonsUrl.pauseOn,za=k.buttonsUrl.loop,ma=k.buttonsUrl.loopOn,Xa=k.buttonsUrl.volume,Hb=k.buttonsUrl.volumeOn,Ya=k.buttonsUrl.mute,Ib=k.buttonsUrl.muteOn,Aa=k.buttonsUrl.shuffle,na=k.buttonsUrl.shuffleOn,Mb=e(k.playlistHolder),ea=k.autoPlay;O&&(ea=!1);var Ea=k.soundcloudApiKey,ra=k.useSongNameScroll,ub=k.autoSetSongTitle,I=k.loopingOn,J=k.randomPlay,ob=k.mediaTimeSeparator,Cb=k.seekTooltipSeparator,
Oa=k.useNumbersInPlaylist,vb=k.activePlaylist,l=k.useAlertMessaging,Pa=k.ativatePlaylistScroll,Sa,h=null,q=!0,va=!1,Ua=!1,Va=T.html(),rb=qa.html(),sb=Ga.html(),C=!1,pb="",x=!1;I&&d.find(".player_loop").find("img").attr("src",ma);J&&d.find(".player_shuffle").find("img").attr("src",na);var w=[],F=[],K=[],r,E,lb=e("<div/>").css("display","none").appendTo(d),G=[],L=[],y;(function(){if(ra){var a=e("<div/>").addClass("fontMeasure").appendTo(d);y=new apTextScroller;y.init(a,T,Qb,"left",k.scrollSeparator,
k.scrollSpeed)}})();var f=e.playlistManager({randomPlay:J,loopingOn:I});e(f).on("ap_PlaylistManager.COUNTER_READY",function(){var a=f.getCounter();eb();ub&&(y&&ra?(y.deactivate(),fa(a)&&(y.input(fa(a)),y.activate())):fa(a)&&T.html(fa(a)));pb=w[a].mp3Path;p&&Na();Pb();"undefined"!==typeof itemTriggered&&itemTriggered(a)});e(f).on("ap_PlaylistManager.PLAYLIST_END",function(){eb();"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd()});e(f).on("ap_PlaylistManager.PLAYLIST_END_ALERT",
function(){"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd()});var Ha="",aa="",ba="";if("ontouchstart"in window){var U=!0;Ha="touchstart.ap";aa="touchmove.ap";ba="touchend.ap"}else U=!1,Ha="mousedown.ap",aa="mousemove.ap",ba="mouseup.ap";var gb,ya=!1,B=k.defaultVolume;0>B?B=0:1<B&&(B=1);var ha=!1,sa=d.find(".volume_bg"),ca=sa.width(),xb=d.find(".volume_level").css("width",B*ca+"px"),ja=d.find(".volume_seekbar").css("cursor","pointer").on(Ha,function(a){if(fb)return!1;wb(a);return ya=
!1});if(!O){ja.on("mouseover",yb);var ia=d.find(".player_volume_tooltip").css("left",parseInt(ja.css("left"),10)+"px")}var V,Z=!1,ab=d.find(".progress_bg"),tb=d.find(".load_progress"),wa=d.find(".play_progress"),W=ab.width(),da=d.find(".player_progress").css("cursor","pointer").on(Ha,function(a){Ab(a);return!1});if(!O){da.on("mouseover",Bb);var ka=d.find(".player_progress_tooltip").css("left",parseInt(da.css("left"),10)+"px")}(function(){var a=[d.find(".controls_next"),d.find(".controls_prev"),d.find(".controls_toggle"),
d.find(".player_volume"),d.find(".player_loop"),d.find(".player_shuffle")],b=a.length,c=0;for(c;c<b;c++){var n=e(a[c]).css("cursor","pointer").on("click",Db);if(!O)n.on("mouseover",Eb).on("mouseout",Jb)}})();0!=vb.replace(/^\s+|\s+$/g,"").length?jb(vb):m||(q=!1,m=!0,"undefined"!==typeof audioPlayerSetupDone&&audioPlayerSetupDone(),Ca());this.playAudio=function(){if(!m||q||!h||x||!C)return!1;p&&p.play();d.find(".controls_toggle").find("img").attr("src",la);C=x=!0};this.pauseAudio=function(){if(!m||
q||!h||!x||!C)return!1;p&&p.pause();d.find(".controls_toggle").find("img").attr("src",P);x=!1};this.toggleAudio=function(){if(!m||q||!h||!C)return!1;db()};this.stopAudio=function(){if(!m||q||!h||!C)return!1;p&&(p.pause(),p.src="");S&&S.off("ended canplay canplaythrough timeupdate loadedmetadata pause play error seeked");Fa();x=!1};this.nextAudio=function(){if(!m||q||!h)return!1;R();f.advanceHandler(1,!0)};this.previousAudio=function(){if(!m||q||!h)return!1;R();f.advanceHandler(-1,!0)};this.loadAudio=
function(a){if(!m||q||!h)return!1;if("string"===typeof a){var b=0,c=!1;for(b;b<r;b++)if(a==w[b].title){a=b;c=!0;break}if(!c)return l&&alert('Track with name "'+a+'" doesnt exist. Load audio failed.'),!1}else if("number"===typeof a){if(0>a||a>r-1)return l&&alert('Invalid track number. Track number  "'+a+'" doesnt exist. Load audio failed.'),!1}else return l&&alert("Load audio method requires either a track number or a track title to load. Load audio failed."),!1;R();f.processPlaylistRequest(a)};this.loadPlaylist=
function(a){if(!m||q)return!1;if("undefined"===typeof a)return l&&alert("loadPlaylist method requires playlist parameter. loadPlaylist failed."),!1;q=!0;jb(a)};this.addTrack=function(a,b){if(!m||q)return!1;if("undefined"===typeof a)return l&&alert("addTrack method requires track parameter. AddTrack failed."),!1;var c=1;if("string"!==typeof a)if(a instanceof Array)c=a.length;else return l&&alert("addTrack method requires track as string or array parameter. AddTrack failed."),!1;h&&"hidden"==h&&oa();
var n=0,g=0;if(h)if("undefined"!==typeof b){if(0>b||b>r-1)return l&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'),!1}else{var z=!0;b=r-1}else{if("undefined"!==typeof b){if(0!=b)return l&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'),!1}else b=0;z=!0;kb();var Q=e("<ul id = playlist"+Math.floor(9999*Math.random())+"></ul>");E?Q.appendTo(E.getContentPane()):Q.appendTo(X)}var H=b;for(n;n<c;n++){var A=
document.createElement("ul");var t=1<c?a[n]:a;A.innerHTML=t;var u=A.firstChild;A=A.firstChild.firstChild;var D=e(u);u=e(A);if(void 0!=D.attr("data-type")&&"local"!=D.attr("data-type"))l&&alert('addTrack method supports local type tracks only. addTrack "'+t+'" failed.');else if(void 0!=D.attr("data-mp3Path")){A=D.attr("data-mp3Path");h?z?K[b].after(D):K[b].before(D):Q.append(D);t=z?b+1:b;K.splice(t,0,D);F.splice(t,0,u);u.on("click",Ma);D=u.html();if(Oa){var v=Ba(b)+". "+D;u.html(v)}u={id:b,type:"local",
title:D,mp3Path:A,length:void 0};w.splice(t,0,u);1<c&&(b+=1);g++}else l&&alert('addTrack method requires "data-mp3Path" attributte. addTrack "'+t+'" failed.')}r=w.length;Ta(0);c=f.getCounter();f.setPlaylistItems(r,!1);H<=c&&(z||f.reSetCounter(c+g));Ca();X.css("opacity",1);Pa&&Ja();h||(h=Q,Qa())};this.inputAudio=function(a,b){if(!m||q)return!1;if("undefined"===typeof a)return l&&alert("inputAudio method requires track parameter. inputAudio failed."),!1;var c=1;if(!(a instanceof Object)||a instanceof
Array)if(a instanceof Object&&a instanceof Array)c=a.length;else return l&&alert("inputAudio method requires track as object or array parameter. inputAudio failed."),!1;h&&"hidden"!=h&&oa();var n=0,g=0;if(h)if("undefined"!==typeof b){if(0>b||b>r-1)return l&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. inputAudio failed.'),!1}else{var z=!0;b=r-1}else{if("undefined"!==typeof b){if(0!=b)return l&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'),
!1}else b=0;z=!0;r=0}var Q=b;for(n;n<c;n++){var H=1<c?a[n]:a;if(H.mp3){var A=H.mp3;var t="";H.title&&(t=H.title);H=z?b+1:b;A={id:b,type:"local_hidden",title:t,mp3Path:A,length:void 0};w.splice(H,0,A);1<c&&(b+=1);g++}else l&&alert('inputAudio method requires mp3 parameter. inputAudio "'+H+'" failed.')}r=w.length;Ta(0);c=f.getCounter();f.setPlaylistItems(r,!1);Q<=c&&(z||f.reSetCounter(c+g));q=!1;h||(h="hidden",Qa())};this.removeTrack=function(a){if(!m||q||!h)return!1;if("string"===typeof a){var b=0,
c=!1;for(b;b<r;b++)if(a==w[b].title){a=b;c=!0;break}if(!c)return l&&alert('Track with name "'+a+'" doesnt exist. RemoveTrack failed.'),!1}else if("number"===typeof a){if(0>a||a>r-1)return l&&alert('Invalid track number. Track number  "'+a+'" doesnt exist. RemoveTrack failed.'),!1}else return l&&alert("RemoveTrack method requires either a track number or a track title to remove. RemoveTrack failed."),!1;"hidden"!=h&&(K[a].remove(),K.splice(a,1),F.splice(a,1));w.splice(a,1);r=w.length;0<r?(Ta(0),b=
f.getCounter(),a==b?(hb(),f.setPlaylistItems(r)):(f.setPlaylistItems(r,!1),a<b&&f.reSetCounter(f.getCounter()-1)),"hidden"!=h&&Pa&&Ja()):oa()};this.destroyAudio=function(){if(!m||q||!h)return!1;hb()};this.destroyPlaylist=function(){if(!m||q||!h)return!1;oa()};this.setTitle=function(a){if(!m||q||!h)return!1;y&&ra?(y.deactivate(),y.input(a),y.activate()):T&&T.html(a)};this.checkAudio=function(a){if(!m||q||!h)return!1;x&&("pause"==a?p&&p.pause():"stop"==a&&(p&&(p.pause(),p.src=""),S&&S.off("ended canplay canplaythrough timeupdate loadedmetadata pause play error seeked"),
Fa(),x=!1,Fa()),x=!1,d.find(".controls_toggle").find("img").attr("src",P))};this.toggleShuffle=function(){if(!m)return!1;J?(d.find(".player_shuffle").find("img").attr("src",Aa),J=!1):(d.find(".player_shuffle").find("img").attr("src",na),J=!0);f.setRandom(J)};this.toggleLoop=function(){if(!m)return!1;I?(d.find(".player_loop").find("img").attr("src",za),I=!1):(d.find(".player_loop").find("img").attr("src",ma),I=!0);f.setLooping(I)};this.setVolume=function(a){if(!m||q)return!1;0>a?a=0:1<a&&(a=1);B=a;
ta()};this.getMediaPlaying=function(){return!m||q?!1:x};this.reinitPlaylistScroll=function(){if(!m||q||!h)return!1;E&&(E.reinitialise(),E.scrollToY(0))};this.reinitNameScroll=function(){if(!m||q||!h)return!1;if(y&&ra&&f&&-1!=f.getCounter()){var a=f.getCounter();fa(a)&&(y.input(fa(a)),y.activate())}};this.outputPlaylistData=function(){if(!m||q)return!1;if(h)try{console.log(w)}catch(a){}};return this}})(jQuery);